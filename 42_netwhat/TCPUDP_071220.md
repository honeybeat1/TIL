## what is the diff btw public and private IPs?

IP의 주소는 유한한데 (40억개), 어떻게 모든 기기가 인터넷에 연결될 수 있는 걸까?

![](https://media.vlpt.us/post-images/noyo0123/dbb449f0-f35b-11e9-b6f8-339c87aa4e05/image.png)

[출처](https://www.howtogeek.com/255206/how-use-your-router-and-isps-modemrouter-combo-in-tandem/)
- ISP -Supplied Router/Modem : SK 브로드밴드
- Your Wireless Router 인터넷 공유기 : IPTIME
- 공유기와 이 공유기에 연결되어 있는 모든 컴퓨터는 하나의 네트워크에 속하게 된다.
- 그 네트워크 (LAN)에 연결되어 있는 모든 장치들은 **사설 IP(Private IP)** 를 할당 받게 되고, 각 장치 사이의 통신은 사설 IP를 통해서 이뤄지게 된다. (NAT 1)
- 이 공유기가 인터넷에 연결되어 있는 경우 (NAT 2) 
공유기는 인터넷으로부터 할당 받은 **공인 IP(Public IP)** 를 이용하여 인터넷과 통신한다.

### 따라서 공인 IP는..

- ISP (Internet Service Provider)가 제공하는 IP 주소
- 전세계에서 유일한 주소이며, IP 주소가 충돌하면 인터넷을 사용할 수 없다.
- 주소가 외부에 공개되어 있기에 인터넷에 연결된 다른 PC로 부터의 접근이 가능하므로, 방화벽 등의 보안 프로그램을 설치할 필요가 있음.

### 반면 사설 IP는

- 공유기가 새로 발급 해준 IP 주소를 쓰는 것. 일반 가정이나 회사 내에 할당된 네트워크의 IP 주소
- 로컬 IP, 가상 IP
- IPv4의 주소 부족으로 인해 **서브넷팅 된 IP이기 때문에 라우터에 의해** 로컬 네트워크 상의 PC나 장치에 할당됨
- 그러므로 인터넷이 알 수 있는 것은 공인 IP를 할당받은 기기까지의 경로 뿐이며, 사설 IP의 존재는 알지 못한다.
- 사설 IP를 할당 받은 컴퓨터가 인터넷과 통신하기 위해선 공인 IP를 이용해야 하는데,
    - 이 과정은 해당 컴퓨터가 사설 IP로 인터넷에 패킷을 보내면 **공유기가 해당 패킷에 적혀 있는 사설 IP를 공인 IP로 바꿔주면서 알아서 처리**
    - 인터넷에서 오는 패킷의 목적지도 해당하는 사설 IP 주소로 알아서 변경한 후 전달
- 사설 IP 주소는 3가지 주소 대역으로 고정된다
    - Class A : **10**.0.0.0 ~ **10**.255.255.255
    - Class B : **172.16**.0.0 ~ **172.31**.255.255
    - Class C : **192.168**.0.0 ~ **192.168.**255.255
[참고](https://velog.io/@hidaehyunlee/%EA%B3%B5%EC%9D%B8Public-%EC%82%AC%EC%84%A4Private-IP%EC%9D%98-%EC%B0%A8%EC%9D%B4%EC%A0%90)

###### 정리하면
|  | 공인 IP | 사설 IP |
|:---:|:---:|:---:|
| 할당 주체 | ISP (인터넷 서비스 공급자) | 인터넷 공유기(라우터) |
| 할당 대상 | 개인 또는 회사의 서버 (라우터) | 개인 또는 회사의 기기 |
| 고유성 | 인터넷 상에서 유일한 주소 | 해당 서브넷 네트워크 안에서 유일 |
| 공개 여부 | 내/외부 접근 가능 | 외부 접근 불가능 |


